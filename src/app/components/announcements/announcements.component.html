<app-pagetiltle title="ANNOUNCEMENTS" [breadcrumbItems]="breadCrumbItems"></app-pagetiltle>
<section class="bg-[#121a36]">
  <section
    class="bg-gray-200 h-[400px] bg-[url('https://api.travelfind.me/v1/images/site/c66224c5-e632-44e7-b486-5b696fa7a08d')]">

  </section>
  <div>
    <div class="max-w-[1250px] min-h-screen mx-auto p-4 bg-gray-100 background-image rounded-lg relative -mt-[200px]">
            <!-- CREATE POST -->
            <div class="flex justify-between bg-[#121a36] rounded-lg p-2">
              <!-- <div *ngIf="view.currentUser != null" class="flex justify-between p-2"> -->
              <div class="flex items-center gap-2">
                <div class="w-10 h-10 bg-gray-300 rounded-md">
                  <img class="rounded-md"
                    src="https://marketplace.canva.com/EAFEits4-uw/1/0/1600w/canva-boy-cartoon-gamer-animated-twitch-profile-photo-oEqs2yqaL8s.jpg" />
                </div>
                <!-- <h3 class="uppercase text-gray-200">{{ view.currentUser.first_name }} {{ view.currentUser.last_name }}</h3> -->
              </div>
              <button (click)="createAnnoucement()" class="bg-green-500 px-4 rounded-lg text-gray-100">
                Create Announcement
              </button>
              <!-- <i class="fa text-gray-200 text-xl pt-2 cursor-pointer" [ngClass]="isCollapsed ? 'fa-plus-square-o' : 'fa-times'"  aria-hidden="true"></i> -->

            </div>

            <div class="collapse" id="collapsiblecreatepost" [ngClass]="{ show: !isCollapsed }">
              <div class="p-4 bg-white shadow-md rounded-lg">
                <form class="flex flex-col gap-2" (ngSubmit)="onAnnoucementSubmit(announcementForm)"
                  #announcementForm="">
                  <input class="p-2 border rounded bg-gray-100" placeholder="Type your title..." id="title" name="title"
                    ngModel required />
                  <textarea class="p-2 border rounded bg-gray-100" placeholder="Type your message here ..."
                    id="description" name="description" ngModel required></textarea>
                  <div class="flex justify-end">
                    <button type="submit" class="w-24 text-sm px-3 py-2 bg-green-500 text-white rounded">Post</button>
                  </div>
                </form>
              </div>
            </div>

            <!-- ANNOUNCEMENTS LIST -->
            <div class="flex flex-wrap justify-center gap-2 ">
              <div *ngFor="let item of announcements"
                class="bg-white shadow-lg rounded-lg w-[400px] border border-gray-200 overflow-hidden hover:shadow-xl transition-shadow duration-300">
                <!-- Image Section -->
                <div class="h-64 relative">
                  <img class="w-full h-full object-cover"
                    [src]="item.image || 'https://cdn.pixabay.com/photo/2015/04/23/22/00/tree-736885_1280.jpg'"
                    alt="Announcement Image" />
                  <!-- Small Tags -->
                  <div class="absolute bottom-2 left-2 flex gap-2">
                    <span *ngFor="let tag of item.tags" class="bg-teal-500 text-white text-xs px-2 py-1 rounded-full">{{
                      tag }}</span>
                  </div>
                </div>

                <!-- Content Section -->
                <div class="p-4">
                  <!-- Title and Actions -->
                  <div class="flex justify-between items-center mb-3">
                    <h4 class="text-[#121a36] text-lg font-bold">{{ item.title }}</h4>
                    <div class="relative group">
                      <i class="fa fa-ellipsis-v p-1 cursor-pointer text-gray-500 hover:text-[#121a36]"></i>
                      <!-- Dropdown for Edit and Delete -->
                      <div class="absolute right-0 bg-white shadow-lg border rounded-lg hidden group-hover:block w-32">
                        <ul class="-mt-2">
                          <li><a class="block px-4 py-2 hover:bg-gray-100 cursor-pointer"
                              (click)="openEditModal(item)">Edit</a></li>
                          <li><a class="block px-4 py-2 hover:bg-gray-100 cursor-pointer text-red-500"
                              (click)="onDeleteAnnouncement(item.id)">Delete</a></li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  <div class="pb-2 flex flex-row">
                    <span class="bg-gray-300 rounded-lg px-2 text-sm text-gray-500 py-1">Education</span>
                  </div>
                  <!-- Author and Date -->
                  <p class="text-md uppercase font-normal text-gray-500 mb-2">
                    {{ item.user.first_name }} {{ item.user.last_name }} |
                    <span class="text-gray-400 lowercase">{{ item.datecreated | lastSeen }}</span>
                  </p>
                  <!-- Description -->
                  <!-- <p class="line-clamp-4 text-gray-700 mb-4 cursor-pointer" (click)="viewAnnouncement(item)">
                    {{ item.description }}
                  </p> -->
                  <!-- Read More Button -->
                  <button
                    class="w-full px-5 py-2 text-sm uppercase bg-[#121a36] text-white rounded-lg hover:bg-teal-700 transition-colors duration-300"
                    (click)="viewAnnouncement(item)">
                    Read More
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

</section>
<div class="p-12 bg-[#121a36]">
  <app-timeline></app-timeline>
</div>